/*
 * bmp280.c
 *
 *  Created on: 14. 11. 2020
 *      Author: Stancoj
 */

#include "bmp280.h"

static uint8_t bmp280_data_buffer[DATA_BUFFER_SIZE];


bool InitBMP280(void)
{
	/* Check BMP280 ID*/
	if(i2c_master_read(BMP280_ID_REG_ADDR, BMP280_I2C_ADDRESS, bmp280_data_buffer, 1))
	{
		if(*bmp280_data_buffer == BMP280_ID_REG_VALUE)
		{
			return true;
		}
		else
		{
			return false;
		}
	}
	else
	{
		false;
	}
}


void ReadPreasure3B(void)
{
	i2c_master_read(BMP280_TEMP_MSB_REG_ADDR, BMP280_I2C_ADDRESS, bmp280_data_buffer, 3);
}

void ReadPreasure1B(void)
{
	i2c_master_read((BMP280_TEMP_MSB_REG_ADDR+1), BMP280_I2C_ADDRESS, bmp280_data_buffer, 1);
}

void ReadConfig(void)
{
	i2c_master_read(BMP280_CONFIG_REG_ADDR, BMP280_I2C_ADDRESS, bmp280_data_buffer, 2);
}

void ReadCtrlMeas(void)
{
	i2c_master_read(BMP280_CTRL_MEAS_REG_ADDR, BMP280_I2C_ADDRESS, bmp280_data_buffer, 1);
}
